<div class="input-location" [class.invalid]="attribute.required == true && latitude == null && longitude == null && submitted == true">
  <ion-item no-lines text-wrap [formGroup]="formGroup">
    <ion-label class="input-label">
      {{attribute.label}}
      <span ion-text color="danger" *ngIf="attribute.required == true">*</span>
    </ion-label>
    <div [formGroupName]="attribute.key">
      <ion-input hidden type="text" formControlName="lat" [(ngModel)]="latitude"></ion-input>
      <ion-input hidden type="text" formControlName="lon" [(ngModel)]="longitude"></ion-input>
    </div>
  </ion-item>
  <ion-card margin-left margin-right *ngIf="map">
    <image-cache full [src]="map"></image-cache>
  </ion-card>
  <ion-row margin-left margin-right margin-top margin-bottom>
    <ion-col width-50 class="latitude">
      <ion-input type="text" readonly="true" disabled="true" placeholder="Latitude" [(ngModel)]="latitude"></ion-input>
    </ion-col>
    <ion-col width-50 class="longitude">
      <ion-input type="text" readonly="true" disabled="true" placeholder="Longitude" [(ngModel)]="longitude"></ion-input>
    </ion-col>
  </ion-row>
  <button ion-button margin-left icon-left text-uppercase small color="light" [disabled]="offline" *ngIf="latitude && longitude" (click)="updateLocation($event)">
    <ion-icon ios="ios-pin" md="md-pin"></ion-icon> Change Location
  </button>
  <button ion-button margin-left icon-left text-uppercase small color="light" *ngIf="error == true" (click)="detectLocation()">
    <ion-icon ios="ios-locate-outline" md="md-locate"></ion-icon> Detect Location
  </button>
  <p class="input-error" padding-left *ngIf="attribute.required == true && latitude == null && longitude == null && submitted == true">Location required</p>
  <p class="input-error" padding-left *ngIf="error == true">There was a problem detecting your current location.</p>
</div>
